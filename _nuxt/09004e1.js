(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{266:function(e,t,n){"use strict";n.r(t);var r=n(28),o=(n(20),n(49),n(54),n(264),n(208),n(73),n(7).default.extend({data:function(){return{result:"",resultVerification:"",qrCode:"",url:"",download:!1}},head:function(){return{title:"SHC Validator app",script:[{hid:"QRCode",src:"../js/qrcode.min.js",defer:!0},{hid:"PDFDocument",src:"../js/pdfkit.standalone.js",defer:!0},{hid:"blobStream",src:"../js/blob-stream.min.js",defer:!0}]}},methods:{getQRCode:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:new window.QRCode(document.getElementById("qrCode"),{text:e.url,width:420,height:420,colorDark:"#000000",colorLight:"#ffffff",correctLevel:window.QRCode.CorrectLevel.L});case 1:case"end":return t.stop()}}),t)})))()},downloadPdf:function(){return Object(r.a)(regeneratorRuntime.mark((function e(){var t,n,r,img;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new window.PDFDocument({margins:{top:60,bottom:60,left:40,right:40}}),n=t.pipe(window.blobStream()),r=document.getElementById("qrCode"),img=r.getElementsByTagName("img"),t.image(img[0].src,60,60,{width:300}),t.end(),n.on("finish",(function(){var e=n.toBlob("application/pdf"),t="covid result.pdf";if(navigator.msSaveBlob)navigator.msSaveBlob(e,t);else{var link=document.createElement("a");if(void 0!==link.download){var r=URL.createObjectURL(e);link.setAttribute("href",r),link.setAttribute("download",t),link.style.visibility="hidden",document.body.appendChild(link),link.click(),document.body.removeChild(link)}}}));case 7:case"end":return e.stop()}}),e)})))()},onDecode:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.result=e,t.url="https://genobank.io/test/shc/#".concat(e.substr(5)),t.getQRCode(),t.download=!0,n.next=6,fetch("https://apishc.genobank.io/validate",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({input:e})});case 6:return r=n.sent,n.next=9,r.json();case 9:o=n.sent,t.resultVerification=JSON.stringify(o,null,2);case 11:case"end":return n.stop()}}),n)})))()}}})),d=n(67),component=Object(d.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12"},[n("p",{staticClass:"decode-result text-wrap text-break"},[e._v("Last result: "),n("b",[e._v(e._s(e.result))])]),e._v(" "),n("qrcode-capture",{on:{decode:e.onDecode}}),e._v(" "),n("div",{attrs:{id:"qrCode"}}),e._v(" "),e.download?n("button",{on:{click:e.downloadPdf}},[e._v("Download")]):e._e(),e._v(" "),n("p",[n("b",[e._v(e._s(e.resultVerification))])])],1)])])}),[],!1,null,null,null);t.default=component.exports}}]);